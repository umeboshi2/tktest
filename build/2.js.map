{"version":3,"sources":["webpack:///./client/applets/bumblr/main.coffee","webpack:///./~/tbirds/src/apputil.coffee?aebf*","webpack:///./~/tbirds/src/regions.coffee?ba05*","webpack:///./~/tbirds/src/templates/layout.coffee?7e41*","webpack:///./~/tbirds/src/views/layout.coffee?7c69*","webpack:///./~/ms/index.js?6d36*","webpack:///./~/tbirds/src/behaviors/show-initial-empty.coffee?4968*","webpack:///./~/tbirds/src/controllers.coffee?ff93*","webpack:///./~/tbirds/src/tkapplet.coffee?9eb3*","webpack:///./~/tbirds/src/views/empty.coffee?3dae*","webpack:///./~/tbirds/src/lscollection.coffee?cb4d","webpack:///./client/applets/bumblr/models.coffee","webpack:///./~/backbone.paginator/lib/backbone.paginator.js","webpack:///./client/applets/bumblr/collections.coffee","webpack:///./client/applets/bumblr/controller.coffee","webpack:///./client/applets/bumblr/views/misc.coffee","webpack:///./client/applets/bumblr/views/sidebar.coffee"],"names":[],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kCAAkC;AAClC;AACA,oCAAoC,OAAO;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,kBAAkB,OAAO;AACzB;AACA;AACA;;AAEA,kBAAkB,OAAO;AACzB;AACA;AACA;;AAEA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,OAAO;AACzB;AACA;AACA;;AAEA,kBAAkB,OAAO;AACzB;;AAEA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;;AAEA,kBAAkB,OAAO;AACzB;;AAEA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,kBAAkB,OAAO;AACzB,kBAAkB,OAAO;AACzB,kBAAkB,OAAO;AACzB,kBAAkB,OAAO;AACzB,kBAAkB,OAAO;AACzB,kBAAkB,OAAO;AACzB,kBAAkB,OAAO,eAAe,yBAAyB;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA,kBAAkB,oBAAoB;AACtC;AACA;;AAEA,eAAe,eAAe;;AAE9B,eAAe,OAAO;;AAEtB,eAAe,uBAAuB;AACtC;AACA;;AAEA,eAAe,QAAQ;AACvB;AACA;AACA;;AAEA,eAAe,OAAO;;AAEtB,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA,eAAe,OAAO;AACtB;;AAEA,eAAe,OAAO;AACtB;AACA;;AAEA;;AAEA;;AAEA;;AAEA,kCAAkC;AAClC,yDAAyD;;AAEzD,yCAAyC;AACzC;AACA;AACA;;AAEA;;AAEA,yCAAyC;AACzC;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,qCAAqC;AACrC;AACA,oDAAoD;;AAEpD;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,sCAAsC,aAAa;AACnD;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA,eAAe,8BAA8B;AAC7C,eAAe,OAAO;AACtB,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6CAA6C,YAAY;AACzD;AACA;AACA;AACA;AACA;;AAEA;;AAEA,6CAA6C,YAAY;AACzD;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,eAAe,mBAAmB;AAClC,eAAe,oBAAoB;;AAEnC,gBAAgB;AAChB;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,0CAA0C,YAAY,UAAU;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,YAAY;AAC3D,eAAe;AACf;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,2CAA2C,eAAe;AAC1D,iBAAiB;AACjB;AACA;AACA;AACA,wCAAwC,YAAY,aAAa;AACjE;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,eAAe;AAC1D,iBAAiB;AACjB;AACA;AACA;AACA;AACA,wCAAwC,YAAY,aAAa;AACjE;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,YAAY,aAAa;AAC7D;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oCAAoC,YAAY,aAAa;AAC7D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,gBAAgB,UAAU;AAC1B;;AAEA,gBAAgB,WAAW;AAC3B;;AAEA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,eAAe,OAAO;AACtB,eAAe,OAAO,YAAY,+BAA+B;AACjE,eAAe,QAAQ;AACvB;AACA,eAAe,QAAQ;;AAEvB,gBAAgB,UAAU;AAC1B,gBAAgB,WAAW;;AAE3B;AACA,gBAAgB,kCAAkC;AAClD;AACA;AACA;AACA;;AAEA,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA;;AAEA,sDAAsD;AACtD;AACA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,eAAe,6BAA6B;;AAE5C,eAAe,OAAO;;AAEtB,eAAe,QAAQ;;AAEvB,eAAe,QAAQ;AACvB;;AAEA;AACA,gBAAgB,kCAAkC;AAClD;AACA;AACA;;AAEA;AACA;AACA;;AAEA,4BAA4B;;AAE5B;AACA;AACA,mCAAmC;;AAEnC;;AAEA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qCAAqC,eAAe;AACpD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA,eAAe,OAAO,UAAU,gCAAgC;;AAEhE;AACA,gBAAgB,kCAAkC;AAClD;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA,eAAe,OAAO,UAAU,gCAAgC;;AAEhE;AACA,gBAAgB,kCAAkC;AAClD;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA,eAAe,OAAO,UAAU,gCAAgC;;AAEhE;AACA,gBAAgB,kCAAkC;AAClD;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA,eAAe,OAAO,UAAU,gCAAgC;;AAEhE;AACA,gBAAgB,kCAAkC;AAClD;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,eAAe,cAAc;AAC7B;AACA,eAAe,OAAO,YAAY,8BAA8B;AAChE;AACA;AACA,eAAe,QAAQ;AACvB,QAAQ,8BAA8B;;AAEtC,gBAAgB,UAAU;AAC1B;AACA;;AAEA,gBAAgB,WAAW;;AAE3B;AACA,gBAAgB,kCAAkC;AAClD;AACA;AACA;;AAEA;;AAEA,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAA0C;AAC1C,+CAA+C;AAC/C,+CAA+C;AAC/C,wCAAwC;AACxC;AACA;;AAEA,8CAA8C,UAAU,qBAAqB;AAC7E;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA,eAAe,OAAO,UAAU,gCAAgC;;AAEhE;AACA,gBAAgB,kCAAkC;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,eAAe,OAAO;AACtB,eAAe,mCAAmC;AAClD,eAAe,OAAO;;AAEtB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,SAAS;AACjE;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,eAAe,EAAE;AACjB,eAAe,OAAO;AACtB,eAAe,eAAe;AAC9B;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA,eAAe;AACf,gBAAgB;AAChB;;AAEA;;AAEA,cAAc;;AAEd;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,eAAe,OAAO;AACtB,eAAe,OAAO;;AAEtB,gBAAgB,eAAe;AAC/B;AACA;AACA;AACA,4DAA4D;AAC5D;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA,uBAAuB;AACvB;;AAEA;AACA;AACA;;AAEA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;;AAEA,gBAAgB,OAAO;AACvB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;;AAEA,gBAAgB,eAAe;AAC/B;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,eAAe,OAAO;AACtB;AACA;;AAEA,gBAAgB;AAChB;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,wBAAwB;AACjD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC,mBAAmB;AAC5D,uDAAuD,aAAa;AACpE;AACA;;AAEA;AACA;;AAEA;AACA,qDAAqD,YAAY,aAAa;AAC9E;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,oD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","file":"2.js","sourcesContent":["Marionette = require 'backbone.marionette'\n\nTkApplet = require 'tbirds/tkapplet'\nController = require './controller'\n\nMainChannel = Backbone.Radio.channel 'global'\nBumblrChannel = Backbone.Radio.channel 'bumblr'\n\n\n\nclass Router extends Marionette.AppRouter\n  appRoutes:\n    'bumblr': 'start'\n    'bumblr/settings': 'settings_page'\n    'bumblr/dashboard': 'show_dashboard'\n    'bumblr/listblogs': 'list_blogs'\n    'bumblr/viewblog/:id': 'view_blog'\n    'bumblr/addblog' : 'add_new_blog'\n\n\nclass Applet extends TkApplet\n  Controller: Controller\n  Router: Router\n\n  onBeforeStart: ->\n    blog_collection = BumblrChannel.request 'get_local_blogs'\n    # FIXME use better lscollection\n    blog_collection.fetch()\n    super arguments\n  \nMainChannel.reply 'applet:bumblr:route', () ->\n  console.warn \"Don't use applet:bumblr:route\"\n  controller = new Controller MainChannel\n  blog_collection = BumblrChannel.request 'get_local_blogs'\n  # FIXME use better lscollection\n  blog_collection.fetch()\n  router = new Router\n    controller: controller\n    \nmodule.exports = Applet\n\n\n\n// WEBPACK FOOTER //\n// ./client/applets/bumblr/main.coffee","$ = require 'jquery'\n_ = require 'underscore'\nBackbone = require 'backbone'\n\n\n\n#https://github.com/goodeggs/teacup-camel-to-kebab\ncamel_to_kebab = (str) ->\n  str.replace(/([A-Z])/g, ($1) -> \"-#{$1.toLowerCase()}\")\n\ncapitalize = (str) ->\n  str.charAt(0).toUpperCase() + str.slice(1)\n\ncreate_model = (collection, options) ->\n  model = collection.create()\n  for key, value of options\n    model.set key, value\n  collection.add model\n  collection.save()\n\ncreate_new_approuter = (channel, Router, Controller) ->\n  controller = new Controller\n  channel.reply 'main-controller', ->\n    controller\n  router = new Router\n    controller: controller\n  router\n  \nget_model = (collection, id) ->\n  model = collection.get id\n  if model is undefined\n    new collection.model\n      id: id\n  else\n    model\n  \nhandle_newlines = (str) ->\n  console.warn \"handle_newlines being replaced by newline_2_br\"\n  str.replace(/(?:\\r\\n|\\r|\\n)/g, '<br />')\n\nmake_field_input_ui = (fieldlist) ->\n  uiobject = {}\n  for field in fieldlist\n    uiobject[field] = \"input[name=\\\"#{field}\\\"]\"\n  return uiobject\n\nmake_json_post_settings = (url, data, type='POST') ->\n  settings =\n    type: type\n    url: url\n    data: JSON.stringify data\n    accepts: 'application/json'\n    contentType: 'application/json'\n  return settings\n\nmake_json_post = (url, data, type='POST') ->\n  settings = make_json_post_settings url, data, type\n  $.ajax settings\n\n# These are handlers to retrieve the colors\n# from the navbars, and are used to create\n# the default color for the fullcalendar\n# events.\nnavbar_color_handlers = (channel, selector) ->\n  channel.reply 'get-navbar-color', ->\n    navbar = $ selector\n    navbar.css 'color'\n  channel.reply 'get-navbar-bg-color', ->\n    navbar = $ selector\n    navbar.css 'background-color'\n    \n\nnavbar_set_active = (path) ->\n  path_top = path.split('/')[0]\n  # FIXME this should be attached to view or\n  # be a behavior\n  for li in $('#navbar-view li')\n    liq = $ li\n    liq.removeClass('active')\n    if path_top == liq.attr('appname')\n      liq.addClass('active')\n\nnavigate_to_url = (url) ->\n  if url.split('/')[0] == ''\n    window.location = url\n  else\n    r = new Backbone.Router\n    r.navigate url, trigger:true\n\nnewline_2_br = (str) ->\n  str.replace(/(?:\\r\\n|\\r|\\n)/g, '<br />')\n\nrandom_choice = (myArray) ->\n  index = Math.floor(Math.random() * myArray.length)\n  myArray[index]\n\nremove_trailing_slashes = (path) ->\n  path.replace /\\/$/, \"\"\n\n# FIXME: we really need the equivalent of pressing \"home\"\n# http://stackoverflow.com/questions/1144805/scroll-to-the-top-of-the-page-using-javascript-jquery\nscroll_top_fast = ()  ->\n  #$('html, body').animate {scrollTop: 0}, 'fast'\n  window.scrollTo 0,0\n  \nscroll_top_fast_jquery = ()  ->\n  $('html, body').animate {scrollTop: 0}, 'fast'\n\n# use polyfill for String.endsWith if needed\n#if not String.prototype?.endsWith\n#  String.prototype.endsWith = string_endswith\nstring_endswith = (searchString, position) ->\n  subjectString = @toString()\n  if typeof position != 'number' or !isFinite(position) or Math.floor(position) != position or position > subjectString.length\n    position = subjectString.length\n  position -= searchString.length\n  lastIndex = subjectString.indexOf(searchString, position)\n  lastIndex != -1 and lastIndex == position\n\nstring_startswith = (searchString, position) ->\n  position = position or 0\n  return @substr(position, searchString, position) == searchString\n  \n#if !String::startsWith\n#  String::startsWith = (searchString, position) ->\n#    position = position or 0\n#    @substr(position, searchString.length) == searchString\n\nmodule.exports =\n  camel_to_kebab: camel_to_kebab\n  capitalize: capitalize\n  create_model: create_model\n  create_new_approuter: create_new_approuter\n  get_model: get_model\n  handle_newlines: handle_newlines\n  make_field_input_ui: make_field_input_ui\n  make_json_post_settings: make_json_post_settings\n  make_json_post: make_json_post\n  navbar_color_handlers: navbar_color_handlers\n  navbar_set_active: navbar_set_active\n  navigate_to_url: navigate_to_url\n  random_choice: random_choice\n  remove_trailing_slashes: remove_trailing_slashes\n  scroll_top_fast: scroll_top_fast\n  scroll_top_fast_jquery: scroll_top_fast_jquery\n  string_endswith: string_endswith\n  string_startswith: string_startswith\n  \n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./~/tbirds/src/apputil.coffee","Backbone = require 'backbone'\nMarionette = require 'backbone.marionette'\n\nMainChannel = Backbone.Radio.channel 'global'\n\n\nclass SlideDownRegion extends Backbone.Marionette.Region\n  attachHtml: (view) ->\n    speed = if @slide_speed then @slide_speed else 'fast'\n    @$el.hide()\n    @$el.html view.el\n    @$el.slideDown speed\n\nclass BootstrapModalRegion extends Backbone.Marionette.Region\n  el: '#modal'\n  backdrop: false\n  \n  getEl: (selector) ->\n    $el = $ selector\n    $el.attr 'class', 'modal'\n    #$el.attr 'class', 'modal fade'\n    $el\n    \n  show: (view) ->\n    super view\n    @$el.modal\n      backdrop: @backdrop\n    @$el.modal 'show'\n      \nshow_modal = (view, backdrop=false) ->\n  modal_region = MainChannel.request 'main:app:get-region', 'modal'\n  modal_region.backdrop = backdrop\n  modal_region.show view\n\nmodule.exports =\n  BootstrapModalRegion: BootstrapModalRegion\n  show_modal: show_modal\n  SlideDownRegion: SlideDownRegion\n  # named\n  modal: BootstrapModalRegion\n  slideDown: SlideDownRegion\n\n\n\n// WEBPACK FOOTER //\n// ./~/tbirds/src/regions.coffee","tc = require 'teacup'\n\n\n########################################\n# Layout Templates\n########################################\nBootstrapLayoutTemplate = tc.renderable () ->\n  tc.div '#main-navbar.navbar.navbar-default.navbar-fixed-top',\n  role:'navigation'\n  tc.div '.container-fluid', ->\n    tc.div '.row', ->\n      tc.div '#sidebar.col-sm-2'\n      tc.div '#main-content.col-sm-9'\n  tc.div '#footer'\n  tc.div '#modal'\n\nBootstrapNoGridLayoutTemplate = tc.renderable () ->\n  tc.div '#main-navbar.navbar.navbar-default.navbar-fixed-top',\n  role:'navigation'\n  #div '#header.listview-header'\n  tc.div '.main-layout', ->\n    tc.div '#sidebar'\n    tc.div '#main-content'\n  tc.div '#footer'\n  tc.div '#modal'\n\n_MainLayoutTemplate = tc.renderable (container) ->\n  tc.div '#navbar-view-container'\n  #tc.div '#editor-bar-container'\n  tc.div \".#{container}\", ->\n    tc.div '.row', ->\n      tc.div '.col-md-10', ->\n        tc.div '#messages'\n    tc.div '#applet-content.row'\n  tc.div '#footer'\n  tc.div '#modal'\n\nMainLayoutTemplate = ->\n  _MainLayoutTemplate 'container'\n\nMainFluidLayoutTemplate = ->\n  _MainLayoutTemplate 'container-fluid'\n  \n\nMainContentTemplate = tc.renderable (doc) ->\n  atts = doc.data.attributes\n  tc.article '.document-view.content', ->\n    tc.h1 atts.title\n    tc.p '.lead', atts.description\n    tc.div '.body', ->\n      tc.raw atts.body\n      \nmake_sidebar_template = (columns=3, size='sm', position='left') ->\n  tc.renderable () ->\n    if position is 'left'\n      tc.div \"#sidebar.col-#{size}-#{columns}.left-column\"\n    tc.div \"#main-content.col-#{size}-#{12 - columns}\"\n    if position is 'right'\n      tc.div \"#sidebar.col-#{size}-#{columns}.right-column\"\n\n########################################\nmodule.exports =\n  BootstrapLayoutTemplate: BootstrapLayoutTemplate\n  BootstrapNoGridLayoutTemplate: BootstrapNoGridLayoutTemplate\n  MainLayoutTemplate: MainLayoutTemplate\n  MainFluidLayoutTemplate: MainFluidLayoutTemplate\n  MainContentTemplate: MainContentTemplate\n  make_sidebar_template: make_sidebar_template\n\n\n\n// WEBPACK FOOTER //\n// ./~/tbirds/src/templates/layout.coffee","Backbone = require 'backbone'\nMarionette = require 'backbone.marionette'\ntc = require 'teacup'\nms = require 'ms'\n\nLayoutTemplates = require '../templates/layout'\nShowInitialEmptyContent = require '../behaviors/show-initial-empty'\n\nRegions = require '../regions'\n\nclass MainPageLayout extends Backbone.Marionette.View\n  template: LayoutTemplates.MainFluidLayoutTemplate\n  regions:\n    messages: '#messages'\n    navbar: '#navbar-view-container'\n    #modal: '#modal'\n    modal: Regions.BootstrapModalRegion\n    applet: '#applet-content'\n    footer: '#footer'\n    \n    \n    \nclass SidebarAppletLayout extends Backbone.Marionette.View\n  template: LayoutTemplates.make_sidebar_template()\n  regions:\n    sidebar: '#sidebar'\n    content: '#main-content'\n\n\nclass ToolbarAppletLayout extends Backbone.Marionette.View\n  behaviors:\n    ShowInitialEmptyContent:\n      behaviorClass: ShowInitialEmptyContent\n  template: tc.renderable () ->\n    tc.div '.row', ->\n      tc.div  '#main-toolbar.col-sm-6.col-sm-offset-3'\n    tc.div '.row', ->\n      tc.div '#main-content.col-sm-10.col-sm-offset-1'\n  regions: ->\n    region = new Regions.SlideDownRegion\n      el: '#main-content'\n    region.slide_speed = ms '.01s'\n    content: region\n    toolbar: '#main-toolbar'\n\nDefaultAppletLayout = SidebarAppletLayout    \nmodule.exports =\n  DefaultAppletLayout: DefaultAppletLayout\n  MainPageLayout: MainPageLayout\n  SidebarAppletLayout: SidebarAppletLayout\n  ToolbarAppletLayout: ToolbarAppletLayout\n  \n\n\n\n// WEBPACK FOOTER //\n// ./~/tbirds/src/views/layout.coffee","/**\n * Helpers.\n */\n\nvar s = 1000\nvar m = s * 60\nvar h = m * 60\nvar d = h * 24\nvar y = d * 365.25\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} options\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {}\n  var type = typeof val\n  if (type === 'string' && val.length > 0) {\n    return parse(val)\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ?\n\t\t\tfmtLong(val) :\n\t\t\tfmtShort(val)\n  }\n  throw new Error('val is not a non-empty string or a valid number. val=' + JSON.stringify(val))\n}\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str)\n  if (str.length > 10000) {\n    return\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(str)\n  if (!match) {\n    return\n  }\n  var n = parseFloat(match[1])\n  var type = (match[2] || 'ms').toLowerCase()\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n\n    default:\n      return undefined\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd'\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h'\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm'\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's'\n  }\n  return ms + 'ms'\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms'\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's'\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/ms/index.js\n// module id = 135\n// module chunks = 0 1 2","Backbone = require 'backbone'\nMarionette = require 'backbone.marionette'\n\nMainChannel = Backbone.Radio.channel 'global'\n\nEmptyView = require '../views/empty'\n\nclass ShowInitialEmptyContent extends Backbone.Marionette.Behavior\n  onDomRefresh: ->\n    view = new EmptyView\n    @view.showChildView 'content', view\n    \nmodule.exports = ShowInitialEmptyContent\n\n\n\n\n// WEBPACK FOOTER //\n// ./~/tbirds/src/behaviors/show-initial-empty.coffee","$ = require 'jquery'\nBackbone = require 'backbone'\nMarionette = require 'backbone.marionette'\n\n{ DefaultAppletLayout } = require './views/layout'\nUtil = require './apputil'\n\nMainChannel = Backbone.Radio.channel 'global'\n\nclass BaseController extends Backbone.Marionette.Object\n  init_page: () ->\n    # do nothing\n  scroll_top: Util.scroll_top_fast\n  navigate_to_url: Util.navigate_to_url\n  navbar_set_active: Util.navbar_set_active\n\nclass MainController extends BaseController\n  layoutClass: DefaultAppletLayout\n  _get_applet: ->\n    app = MainChannel.request 'main:app:object'\n    app.getView().getRegion 'applet'\n    \n  setup_layout: ->\n    @layout = new @layoutClass\n    #console.log \"created layout\", @layout\n    applet = @_get_applet()\n    if applet.hasView()\n      #console.log \"applet has view\"\n      applet.empty()\n    applet.show @layout\n\n  # use this method to create a layout only if\n  # needed, making routing within the applet\n  # more efficient.\n  setup_layout_if_needed: ->\n    if @layout is undefined\n      #console.log 'layout is undefined'\n      @setup_layout()\n    else if @layout.isDestroyed()\n      #console.log 'layout is destroyed ------>', @layout\n      @setup_layout()\n    \n  \n  _get_region: (region) ->\n    @layout.getRegion region\n\n  _show_content: (view) ->\n    console.warn \"_show_content is deprecated\"\n    content = @_get_region 'content'\n    content.show view\n\n  _empty_sidebar: ->\n    sidebar = @_get_region 'sidebar'\n    sidebar.empty()\n    sidebar\n        \n  _make_sidebar: ->\n    console.warn \"_make_sidebar is deprecated\"\n    sidebar = @_empty_sidebar()\n    view = new @sidebarclass\n      model: @sidebar_model\n    sidebar.show view\n    \n  _show_view: (vclass, model) ->\n    view = new vclass\n      model: model\n    @layout.showChildView 'content', view\n\n  _load_view: (vclass, model, objname) ->\n    # FIXME\n    # presume \"id\" is only attribute there if length is 1\n    if model.isEmpty() or Object.keys(model.attributes).length is 1\n      response = model.fetch()\n      response.done =>\n        @_show_view vclass, model\n      response.fail =>\n        msg = \"Failed to load #{objname} data.\"\n        MessageChannel.request 'danger', msg\n    else\n      @_show_view vclass, model\n      \n    \nmodule.exports =\n  BaseController: BaseController\n  MainController: MainController\n\n\n\n\n// WEBPACK FOOTER //\n// ./~/tbirds/src/controllers.coffee","Marionette = require 'backbone.marionette'\nToolkit = require 'marionette.toolkit'\n\nMainChannel = Backbone.Radio.channel 'global'\n\nclass TkApplet extends Toolkit.App\n  onBeforeStart: ->\n    controller = new @Controller\n    controller.applet = @\n    @router = new @Router\n      controller: controller\n\n  onStop: ->\n    console.log \"Stopping TkApplet\", @.isRunning()\n    \n      \nmodule.exports = TkApplet\n\n\n\n// WEBPACK FOOTER //\n// ./~/tbirds/src/tkapplet.coffee","Backbone = require 'backbone'\nMarionette = require 'backbone.marionette'\ntc = require 'teacup'\n\nclass EmptyView extends Backbone.Marionette.View\n  template: tc.renderable ->\n    tc.div '.jumbotron', ->\n      tc.h1 ->\n        tc.text 'Loading ...'\n        tc.i '.fa.fa-spinner.fa-spin'\n    \n  \nmodule.exports = EmptyView\n\n\n\n// WEBPACK FOOTER //\n// ./~/tbirds/src/views/empty.coffee","$ = require 'jquery'\n_ = require 'underscore'\nBackbone = require 'backbone'\nMarionette = require 'backbone.marionette'\n\n\nMainChannel = Backbone.Radio.channel 'global'\nMessageChannel = Backbone.Radio.channel 'messages'\nResourceChannel = Backbone.Radio.channel 'resources'\n\n\nclass BaseLocalStorageCollection extends Backbone.Collection\n  local_storage_key: null\n  initialize: () ->\n    #console.log \"initialize DocumentCollection\"\n    @fetch()\n    @on 'change', @save, @\n    \n  fetch: () ->\n    #console.log 'fetching documents'\n    docs = JSON.parse(localStorage.getItem(@local_storage_key)) || []\n    @set docs\n\n  # FIXME!\n  save: (collection) ->\n    #console.log 'saving documents'\n    localStorage.setItem(@local_storage_key, JSON.stringify(@toJSON()))\n    \n  \n  \nmodule.exports =\n  BaseLocalStorageCollection: BaseLocalStorageCollection\n  \n\n\n\n\n// WEBPACK FOOTER //\n// ./~/tbirds/src/lscollection.coffee","Backbone = require 'backbone'\n\nBumblrChannel = Backbone.Radio.channel 'bumblr'\n\nclass BaseLocalStorageModel extends Backbone.Model\n  initialize: () ->\n    @fetch()\n    @on 'change', @save, @\n   fetch: () ->\n    #console.log '===== FETCH FIRED LOADING LOCAL STORAGE ===='\n    @set JSON.parse localStorage.getItem @id\n   save: (attributes, options) ->\n    #console.log '===== CHANGE FIRED SAVING LOCAL STORAGE ===='\n    localStorage.setItem(@id, JSON.stringify(@toJSON()))\n    return $.ajax\n      success: options.success\n      error: options.error\n      \n  destroy: (options) ->\n    #console.log '===== DESTROY LOCAL STORAGE ===='\n    localStorage.removeItem @id\n   isEmpty: () ->\n    _.size @attributes <= 1\n    \n########################################\n# Models\n########################################\nbaseURL = '//api.tumblr.com/v2'\n\nclass BumblrSettings extends BaseLocalStorageModel\n  id: 'bumblr_settings'\n  \nclass BaseTumblrModel extends Backbone.Model\n  baseURL: baseURL\n  \nclass BlogInfo extends BaseTumblrModel\n  url: () ->\n    \"#{@baseURL}/blog/#{@id}/info?api_key=#{@api_key}&callback=?\"\n    \nconsumer_key = '4mhV8B1YQK6PUA2NW8eZZXVHjU55TPJ3UZnZGrbSoCnqJaxDyH'\nbumblr_settings = new BumblrSettings consumer_key:consumer_key\nBumblrChannel.reply 'get_app_settings', ->\n  bumblr_settings\n    \nmodule.exports =\n  BlogInfo: BlogInfo\n  \n\n\n\n// WEBPACK FOOTER //\n// ./client/applets/bumblr/models.coffee","/*\n  backbone.paginator\n  http://github.com/backbone-paginator/backbone.paginator\n\n  Copyright (c) 2016 Jimmy Yuen Ho Wong and contributors\n\n  @module\n  @license MIT\n*/\n\n(function (factory) {\n\n  // CommonJS\n  if (typeof exports == \"object\" && typeof require == \"function\") {\n    module.exports = factory(require(\"underscore\"), require(\"backbone\"));\n  }\n  // AMD\n  else if (typeof define == \"function\" && define.amd) {\n    define([\"underscore\", \"backbone\"], factory);\n  }\n  // Browser\n  else if (typeof _ !== \"undefined\" && typeof Backbone !== \"undefined\") {\n    var oldPageableCollection = Backbone.PageableCollection;\n    var PageableCollection = factory(_, Backbone);\n\n    /**\n       __BROWSER ONLY__\n\n       If you already have an object named `PageableCollection` attached to the\n       `Backbone` module, you can use this to return a local reference to this\n       PageableCollection class and reset the name PageableCollection to its\n       previous definition.\n\n           // The left hand side gives you a reference to this\n           // PageableCollection implementation, the right hand side\n           // resets PageableCollection to your other PageableCollection.\n           var PageableCollection = PageableCollection.noConflict();\n\n       @static\n       @return {PageableCollection}\n    */\n    Backbone.PageableCollection.noConflict = function () {\n      Backbone.PageableCollection = oldPageableCollection;\n      return PageableCollection;\n    };\n  }\n\n}(function (_, Backbone) {\n\n  \"use strict\";\n\n  var _extend = _.extend;\n  var _omit = _.omit;\n  var _clone = _.clone;\n  var _each = _.each;\n  var _pick = _.pick;\n  var _contains = _.contains;\n  var _isEmpty = _.isEmpty;\n  var _pairs = _.pairs;\n  var _invert = _.invert;\n  var _isArray = _.isArray;\n  var _isFunction = _.isFunction;\n  var _isObject = _.isObject;\n  var _keys = _.keys;\n  var _isUndefined = _.isUndefined;\n  var ceil = Math.ceil;\n  var floor = Math.floor;\n  var max = Math.max;\n\n  var BBColProto = Backbone.Collection.prototype;\n\n  function finiteInt (val, name) {\n    if (!_.isNumber(val) || _.isNaN(val) || !_.isFinite(val) || ~~val !== val) {\n      throw new TypeError(\"`\" + name + \"` must be a finite integer\");\n    }\n    return val;\n  }\n\n  function queryStringToParams (qs) {\n    var kvp, k, v, ls, params = {}, decode = decodeURIComponent;\n    var kvps = qs.split('&');\n    for (var i = 0, l = kvps.length; i < l; i++) {\n      var param = kvps[i];\n      kvp = param.split('='), k = kvp[0], v = kvp[1];\n      if (v == null) v = true;\n      k = decode(k), v = decode(v), ls = params[k];\n      if (_isArray(ls)) ls.push(v);\n      else if (ls) params[k] = [ls, v];\n      else params[k] = v;\n    }\n    return params;\n  }\n\n  // hack to make sure the whatever event handlers for this event is run\n  // before func is, and the event handlers that func will trigger.\n  function runOnceAtLastHandler (col, event, func) {\n    var eventHandlers = col._events[event];\n    if (eventHandlers && eventHandlers.length) {\n      var lastHandler = eventHandlers[eventHandlers.length - 1];\n      var oldCallback = lastHandler.callback;\n      lastHandler.callback = function () {\n        try {\n          oldCallback.apply(this, arguments);\n          func();\n        }\n        catch (e) {\n          throw e;\n        }\n        finally {\n          lastHandler.callback = oldCallback;\n        }\n      };\n    }\n    else func();\n  }\n\n  var PARAM_TRIM_RE = /[\\s'\"]/g;\n  var URL_TRIM_RE = /[<>\\s'\"]/g;\n\n\n  /**\n   * State change event. Fired when PageableCollection#state gets updated\n   *\n   * @event pageable:state:change\n   * @type {object} The PageableCollection#state object of this\n   * PageableCollection instance\n   */\n\n\n  /**\n     Drop-in replacement for Backbone.Collection. Supports server-side and\n     client-side pagination and sorting. Client-side mode also support fully\n     multi-directional synchronization of changes between pages.\n\n     @class PageableCollection\n     @extends Backbone.Collection\n  */\n  var PageableCollection = Backbone.PageableCollection = Backbone.Collection.extend({\n\n    /**\n       The container object to store all pagination states.\n\n       You can override the default state by extending this class or specifying\n       them in an `options` hash to the constructor.\n\n       @property {number} firstPage = 1 - The first page index. Set to 0 if\n       your server API uses 0-based indices. You should only override this value\n       during extension, initialization or reset by the server after\n       fetching. This value should be read only at other times.\n\n       @property {number} lastPage = null - The last page index. This value\n       is __read only__ and it's calculated based on whether `firstPage` is 0 or\n       1, during bootstrapping, fetching and resetting. Please don't change this\n       value under any circumstances.\n\n       @property {number} currentPage = null - The current page index. You\n       should only override this value during extension, initialization or reset\n       by the server after fetching. This value should be read only at other\n       times. Can be a 0-based or 1-based index, depending on whether\n       `firstPage` is 0 or 1. If left as default, it will be set to `firstPage`\n       on initialization.\n\n       @property {number} pageSize = 25 - How many records to show per\n       page. This value is __read only__ after initialization, if you want to\n       change the page size after initialization, you must call\n       PageableCollection#setPageSize.\n\n       @property {number} totalPages = null - How many pages there are. This\n       value is __read only__ and it is calculated from `totalRecords`.\n\n       @property {number} totalRecords = null - How many records there\n       are. This value is __required__ under server mode. This value is optional\n       for client mode as the number will be the same as the number of models\n       during bootstrapping and during fetching, either supplied by the server\n       in the metadata, or calculated from the size of the response.\n\n       @property {string} sortKey = null - The model attribute to use for\n       sorting.\n\n       @property {number} order = -1 - The order to use for sorting. Specify\n       -1 for ascending order or 1 for descending order. If 0, no client side\n       sorting will be done and the order query parameter will not be sent to\n       the server during a fetch.\n    */\n    state: {\n      firstPage: 1,\n      lastPage: null,\n      currentPage: null,\n      pageSize: 25,\n      totalPages: null,\n      totalRecords: null,\n      sortKey: null,\n      order: -1\n    },\n\n    /**\n       @property {string} mode = \"server\" The mode of operations for this\n       collection. `\"server\"` paginates on the server-side, `\"client\"` paginates\n       on the client-side and `\"infinite\"` paginates on the server-side for APIs\n       that do not support `totalRecords`.\n    */\n    mode: \"server\",\n\n    /**\n       A translation map to convert PageableCollection state attributes\n       to the query parameters accepted by your server API.\n\n       You can override the default state by extending this class or specifying\n       them in `options.queryParams` object hash to the constructor.\n\n       @property {string} currentPage = \"page\"\n       @property {string} pageSize = \"per_page\"\n       @property {string} totalPages = \"total_pages\"\n       @property {string} totalRecords = \"total_entries\"\n       @property {string} sortKey = \"sort_by\"\n       @property {string} order = \"order\"\n       @property {string} directions = {\"-1\": \"asc\", \"1\": \"desc\"} - A map for\n       translating a PageableCollection#state.order constant to the ones your\n       server API accepts.\n    */\n    queryParams: {\n      currentPage: \"page\",\n      pageSize: \"per_page\",\n      totalPages: \"total_pages\",\n      totalRecords: \"total_entries\",\n      sortKey: \"sort_by\",\n      order: \"order\",\n      directions: {\n        \"-1\": \"asc\",\n        \"1\": \"desc\"\n      }\n    },\n\n    /**\n       Given a list of models or model attributues, bootstraps the full\n       collection in client mode or infinite mode, or just the page you want in\n       server mode.\n\n       If you want to initialize a collection to a different state than the\n       default, you can specify them in `options.state`. Any state parameters\n       supplied will be merged with the default. If you want to change the\n       default mapping from PageableCollection#state keys to your server API's\n       query parameter names, you can specifiy an object hash in\n       `option.queryParams`. Likewise, any mapping provided will be merged with\n       the default. Lastly, all Backbone.Collection constructor options are also\n       accepted.\n\n       See:\n\n       - PageableCollection#state\n       - PageableCollection#queryParams\n       - [Backbone.Collection#initialize](http://backbonejs.org/#Collection-constructor)\n\n       @constructor\n\n       @property {Backbone.Collection} fullCollection - __CLIENT MODE ONLY__\n       This collection is the internal storage for the bootstrapped or fetched\n       models. You can use this if you want to operate on all the pages.\n\n       @param {Array.<Object>} models\n\n       @param {Object} options\n\n       @param {function(*, *): number} options.comparator - If specified, this\n       comparator is set to the current page under server mode, or the\n       PageableCollection#fullCollection otherwise.\n\n       @param {boolean} options.full 0 If `false` and either a\n       `options.comparator` or `sortKey` is defined, the comparator is attached\n       to the current page. Default is `true` under client or infinite mode and\n       the comparator will be attached to the PageableCollection#fullCollection.\n\n       @param {Object} options.state - The state attributes overriding the defaults.\n\n       @param {string} options.state.sortKey - The model attribute to use for\n       sorting. If specified instead of `options.comparator`, a comparator will\n       be automatically created using this value, and optionally a sorting order\n       specified in `options.state.order`. The comparator is then attached to\n       the new collection instance.\n\n       @param {number} options.state.order - The order to use for sorting. Specify\n       -1 for ascending order and 1 for descending order.\n\n       @param {Object} options.queryParam\n    */\n    constructor: function (models, options) {\n\n      BBColProto.constructor.apply(this, arguments);\n\n      options = options || {};\n\n      var mode = this.mode = options.mode || this.mode || PageableProto.mode;\n\n      var queryParams = _extend({}, PageableProto.queryParams, this.queryParams,\n                                options.queryParams || {});\n\n      queryParams.directions = _extend({},\n                                       PageableProto.queryParams.directions,\n                                       this.queryParams.directions,\n                                       queryParams.directions);\n\n      this.queryParams = queryParams;\n\n      var state = this.state = _extend({}, PageableProto.state, this.state,\n                                       options.state);\n\n      state.currentPage = state.currentPage == null ?\n        state.firstPage :\n        state.currentPage;\n\n      if (!_isArray(models)) models = models ? [models] : [];\n      models = models.slice();\n\n      if (mode != \"server\" && state.totalRecords == null && !_isEmpty(models)) {\n        state.totalRecords = models.length;\n      }\n\n      this.switchMode(mode, _extend({fetch: false,\n                                     resetState: false,\n                                     models: models}, options));\n\n      var comparator = options.comparator;\n\n      if (state.sortKey && !comparator) {\n        this.setSorting(state.sortKey, state.order, options);\n      }\n\n      if (mode != \"server\") {\n        var fullCollection = this.fullCollection;\n\n        if (comparator && options.full) {\n          this.comparator = null;\n          fullCollection.comparator = comparator;\n        }\n\n        if (options.full) fullCollection.sort();\n\n        // make sure the models in the current page and full collection have the\n        // same references\n        if (!_isEmpty(models)) {\n          this.reset(models, _extend({silent: true}, options));\n          this.getPage(state.currentPage);\n          models.splice.apply(models, [0, models.length].concat(this.models));\n        }\n      }\n\n      this._initState = _clone(this.state);\n    },\n\n    /**\n       Makes a Backbone.Collection that contains all the pages.\n\n       @private\n       @param {Array.<Object|Backbone.Model>} models\n       @param {Object} options Options for Backbone.Collection constructor.\n       @return {Backbone.Collection}\n    */\n    _makeFullCollection: function (models, options) {\n\n      var properties = [\"url\", \"model\", \"sync\", \"comparator\"];\n      var thisProto = this.constructor.prototype;\n      var i, length, prop;\n\n      var proto = {};\n      for (i = 0, length = properties.length; i < length; i++) {\n        prop = properties[i];\n        if (!_isUndefined(thisProto[prop])) {\n          proto[prop] = thisProto[prop];\n        }\n      }\n\n      var fullCollection = new (Backbone.Collection.extend(proto))(models, options);\n\n      for (i = 0, length = properties.length; i < length; i++) {\n        prop = properties[i];\n        if (this[prop] !== thisProto[prop]) {\n          fullCollection[prop] = this[prop];\n        }\n      }\n\n      return fullCollection;\n    },\n\n    /**\n       Factory method that returns a Backbone event handler that responses to\n       the `add`, `remove`, `reset`, and the `sort` events. The returned event\n       handler will synchronize the current page collection and the full\n       collection's models.\n\n       @private\n\n       @fires PageableCollection#pageable:state:change when handling an\n       `add`, `remove`, or `reset` event\n\n       @param {PageableCollection} pageCol\n       @param {Backbone.Collection} fullCol\n\n       @return {function(string, Backbone.Model, Backbone.Collection, Object)}\n       Collection event handler\n    */\n    _makeCollectionEventHandler: function (pageCol, fullCol) {\n\n      return function collectionEventHandler (event, model, collection, options) {\n\n        var handlers = pageCol._handlers;\n        _each(_keys(handlers), function (event) {\n          var handler = handlers[event];\n          pageCol.off(event, handler);\n          fullCol.off(event, handler);\n        });\n\n        var state = _clone(pageCol.state);\n        var firstPage = state.firstPage;\n        var currentPage = firstPage === 0 ?\n          state.currentPage :\n          state.currentPage - 1;\n        var pageSize = state.pageSize;\n        var pageStart = currentPage * pageSize, pageEnd = pageStart + pageSize;\n\n        if (event == \"add\") {\n          var pageIndex, fullIndex, addAt, colToAdd, options = options || {};\n          if (collection == fullCol) {\n            fullIndex = fullCol.indexOf(model);\n            if (fullIndex >= pageStart && fullIndex < pageEnd) {\n              colToAdd = pageCol;\n              pageIndex = addAt = fullIndex - pageStart;\n            }\n          }\n          else {\n            pageIndex = pageCol.indexOf(model);\n            fullIndex = pageStart + pageIndex;\n            colToAdd = fullCol;\n            var addAt = !_isUndefined(options.at) ?\n              options.at + pageStart :\n              fullIndex;\n          }\n\n          if (!options.onRemove) {\n            ++state.totalRecords;\n            delete options.onRemove;\n          }\n\n          pageCol.state = pageCol._checkState(state);\n\n          if (colToAdd) {\n            colToAdd.add(model, _extend({}, options, {at: addAt}));\n            var modelToRemove = pageIndex >= pageSize ?\n              model :\n              !_isUndefined(options.at) && addAt < pageEnd && pageCol.length > pageSize ?\n              pageCol.at(pageSize) :\n              null;\n            if (modelToRemove) {\n              runOnceAtLastHandler(collection, event, function () {\n                pageCol.remove(modelToRemove, {onAdd: true});\n              });\n            }\n          }\n\n          if (!options.silent) pageCol.trigger(\"pageable:state:change\", pageCol.state);\n        }\n\n        // remove the model from the other collection as well\n        if (event == \"remove\") {\n          if (!options.onAdd) {\n            // decrement totalRecords and update totalPages and lastPage\n            if (!--state.totalRecords) {\n              state.totalRecords = null;\n              state.totalPages = null;\n            }\n            else {\n              var totalPages = state.totalPages = ceil(state.totalRecords / pageSize);\n              state.lastPage = firstPage === 0 ? totalPages - 1 : totalPages || firstPage;\n              if (state.currentPage > totalPages) state.currentPage = state.lastPage;\n            }\n            pageCol.state = pageCol._checkState(state);\n\n            var nextModel, removedIndex = options.index;\n            if (collection == pageCol) {\n              if (nextModel = fullCol.at(pageEnd)) {\n                runOnceAtLastHandler(pageCol, event, function () {\n                  pageCol.push(nextModel, {onRemove: true});\n                });\n              }\n              else if (!pageCol.length && state.totalRecords) {\n                pageCol.reset(fullCol.models.slice(pageStart - pageSize, pageEnd - pageSize),\n                              _extend({}, options, {parse: false}));\n              }\n              fullCol.remove(model);\n            }\n            else if (removedIndex >= pageStart && removedIndex < pageEnd) {\n              if (nextModel = fullCol.at(pageEnd - 1)) {\n                runOnceAtLastHandler(pageCol, event, function() {\n                  pageCol.push(nextModel, {onRemove: true});\n                });\n              }\n              pageCol.remove(model);\n              if (!pageCol.length && state.totalRecords) {\n                pageCol.reset(fullCol.models.slice(pageStart - pageSize, pageEnd - pageSize),\n                              _extend({}, options, {parse: false}));\n              }\n            }\n          }\n          else delete options.onAdd;\n\n          if (!options.silent) pageCol.trigger(\"pageable:state:change\", pageCol.state);\n        }\n\n        if (event == \"reset\") {\n          options = collection;\n          collection = model;\n\n          // Reset that's not a result of getPage\n          if (collection == pageCol && options.from == null &&\n              options.to == null) {\n            var head = fullCol.models.slice(0, pageStart);\n            var tail = fullCol.models.slice(pageStart + pageCol.models.length);\n            fullCol.reset(head.concat(pageCol.models).concat(tail), options);\n          }\n          else if (collection == fullCol) {\n            if (!(state.totalRecords = fullCol.models.length)) {\n              state.totalRecords = null;\n              state.totalPages = null;\n            }\n            if (pageCol.mode == \"client\") {\n              firstPage = state.lastPage = state.currentPage = state.firstPage;\n              currentPage = firstPage === 0 ? state.currentPage : state.currentPage - 1;\n              pageStart = currentPage * pageSize;\n              pageEnd = pageStart + pageSize;\n            }\n            pageCol.state = pageCol._checkState(state);\n            pageCol.reset(fullCol.models.slice(pageStart, pageEnd),\n                          _extend({}, options, {parse: false}));\n          }\n\n          if (!options.silent) pageCol.trigger(\"pageable:state:change\", pageCol.state);\n        }\n\n        if (event == \"sort\") {\n          options = collection;\n          collection = model;\n          if (collection === fullCol) {\n            pageCol.reset(fullCol.models.slice(pageStart, pageEnd),\n                          _extend({}, options, {parse: false}));\n          }\n        }\n\n        _each(_keys(handlers), function (event) {\n          var handler = handlers[event];\n          _each([pageCol, fullCol], function (col) {\n            col.on(event, handler);\n            var callbacks = col._events[event] || [];\n            callbacks.unshift(callbacks.pop());\n          });\n        });\n      };\n    },\n\n    /**\n       Sanity check this collection's pagination states. Only perform checks\n       when all the required pagination state values are defined and not null.\n       If `totalPages` is undefined or null, it is set to `totalRecords` /\n       `pageSize`. `lastPage` is set according to whether `firstPage` is 0 or 1\n       when no error occurs.\n\n       @private\n\n       @throws {TypeError} If `totalRecords`, `pageSize`, `currentPage` or\n       `firstPage` is not a finite integer.\n\n       @throws {RangeError} If `pageSize`, `currentPage` or `firstPage` is out\n       of bounds.\n\n       @return {Object} Returns the `state` object if no error was found.\n    */\n    _checkState: function (state) {\n      var mode = this.mode;\n      var links = this.links;\n      var totalRecords = state.totalRecords;\n      var pageSize = state.pageSize;\n      var currentPage = state.currentPage;\n      var firstPage = state.firstPage;\n      var totalPages = state.totalPages;\n\n      if (totalRecords != null && pageSize != null && currentPage != null &&\n          firstPage != null && (mode == \"infinite\" ? links : true)) {\n\n        totalRecords = finiteInt(totalRecords, \"totalRecords\");\n        pageSize = finiteInt(pageSize, \"pageSize\");\n        currentPage = finiteInt(currentPage, \"currentPage\");\n        firstPage = finiteInt(firstPage, \"firstPage\");\n\n        if (pageSize < 1) {\n          throw new RangeError(\"`pageSize` must be >= 1\");\n        }\n\n        totalPages = state.totalPages = ceil(totalRecords / pageSize);\n\n        if (firstPage < 0 || firstPage > 1) {\n          throw new RangeError(\"`firstPage must be 0 or 1`\");\n        }\n\n        state.lastPage = firstPage === 0 ? max(0, totalPages - 1) : totalPages || firstPage;\n\n        if (mode == \"infinite\") {\n          if (!links[currentPage + '']) {\n            throw new RangeError(\"No link found for page \" + currentPage);\n          }\n        }\n        else if (currentPage < firstPage ||\n                 (totalPages > 0 &&\n                  (firstPage ? currentPage > totalPages : currentPage >= totalPages))) {\n          throw new RangeError(\"`currentPage` must be firstPage <= currentPage \" +\n                               (firstPage ? \"<\" : \"<=\") +\n                               \" totalPages if \" + firstPage + \"-based. Got \" +\n                               currentPage + '.');\n        }\n      }\n\n      return state;\n    },\n\n    /**\n       Change the page size of this collection.\n\n       Under most if not all circumstances, you should call this method to\n       change the page size of a pageable collection because it will keep the\n       pagination state sane. By default, the method will recalculate the\n       current page number to one that will retain the current page's models\n       when increasing the page size. When decreasing the page size, this method\n       will retain the last models to the current page that will fit into the\n       smaller page size.\n\n       If `options.first` is true, changing the page size will also reset the\n       current page back to the first page instead of trying to be smart.\n\n       For server mode operations, changing the page size will trigger a\n       PageableCollection#fetch and subsequently a `reset` event.\n\n       For client mode operations, changing the page size will `reset` the\n       current page by recalculating the current page boundary on the client\n       side.\n\n       If `options.fetch` is true, a fetch can be forced if the collection is in\n       client mode.\n\n       @param {number} pageSize - The new page size to set to PageableCollection#state.\n       @param {Object} options - {@link PageableCollection#fetch} options.\n       @param {boolean} options.first = false 0 Reset the current page number to\n       the first page if `true`.\n       @param {boolean} options.fetch - If `true`, force a fetch in client mode.\n\n       @throws {TypeError} If `pageSize` is not a finite integer.\n       @throws {RangeError} If `pageSize` is less than 1.\n\n       @chainable\n       @return {XMLHttpRequest|PageableCollection} The XMLHttpRequest\n       from fetch or this.\n    */\n    setPageSize: function (pageSize, options) {\n      pageSize = finiteInt(pageSize, \"pageSize\");\n\n      options = options || {first: false};\n\n      var state = this.state;\n      var totalPages = ceil(state.totalRecords / pageSize);\n      var currentPage = totalPages ?\n          max(state.firstPage, floor(totalPages * state.currentPage / state.totalPages)) :\n        state.firstPage;\n\n      state = this.state = this._checkState(_extend({}, state, {\n        pageSize: pageSize,\n        currentPage: options.first ? state.firstPage : currentPage,\n        totalPages: totalPages\n      }));\n\n      return this.getPage(state.currentPage, _omit(options, [\"first\"]));\n    },\n\n    /**\n       Switching between client, server and infinite mode.\n\n       If switching from client to server mode, the #fullCollection is emptied\n       first and then deleted and a fetch is immediately issued for the current\n       page from the server. Pass `false` to `options.fetch` to skip fetching.\n\n       If switching to infinite mode, and if `options.models` is given for an\n       array of models,PageableCollection#links will be populated with a URL per\n       page, using the default URL for this collection.\n\n       If switching from server to client mode, all of the pages are immediately\n       refetched. If you have too many pages, you can pass `false` to\n       `options.fetch` to skip fetching.\n\n       If switching to any mode from infinite mode, thePageableCollection#links\n       will be deleted.\n\n       @fires PageableCollection#pageable:state:change\n\n       @param {\"server\"|\"client\"|\"infinite\"} mode - The mode to switch to.\n\n       @param {Object} options\n\n       @param {boolean} options.fetch = true - If `false`, no fetching is done.\n\n       @param {boolean} options.resetState = true - If 'false', the state is not\n       reset, but checked for sanity instead.\n\n       @chainable\n       @return {XMLHttpRequest|PageableCollection} The XMLHttpRequest\n       from fetch or this if `options.fetch` is `false`.\n    */\n    switchMode: function (mode, options) {\n\n      if (!_contains([\"server\", \"client\", \"infinite\"], mode)) {\n        throw new TypeError('`mode` must be one of \"server\", \"client\" or \"infinite\"');\n      }\n\n      options = options || {fetch: true, resetState: true};\n\n      var state = this.state = options.resetState ?\n        _clone(this._initState) :\n        this._checkState(_extend({}, this.state));\n\n      this.mode = mode;\n\n      var self = this;\n      var fullCollection = this.fullCollection;\n      var handlers = this._handlers = this._handlers || {}, handler;\n      if (mode != \"server\" && !fullCollection) {\n        fullCollection = this._makeFullCollection(options.models || [], options);\n        fullCollection.pageableCollection = this;\n        this.fullCollection = fullCollection;\n        var allHandler = this._makeCollectionEventHandler(this, fullCollection);\n        _each([\"add\", \"remove\", \"reset\", \"sort\"], function (event) {\n          handlers[event] = handler = _.bind(allHandler, {}, event);\n          self.on(event, handler);\n          fullCollection.on(event, handler);\n        });\n        fullCollection.comparator = this._fullComparator;\n      }\n      else if (mode == \"server\" && fullCollection) {\n        _each(_keys(handlers), function (event) {\n          handler = handlers[event];\n          self.off(event, handler);\n          fullCollection.off(event, handler);\n        });\n        delete this._handlers;\n        this._fullComparator = fullCollection.comparator;\n        delete this.fullCollection;\n      }\n\n      if (mode == \"infinite\") {\n        var links = this.links = {};\n        var firstPage = state.firstPage;\n        var totalPages = ceil(state.totalRecords / state.pageSize);\n        var lastPage = firstPage === 0 ? max(0, totalPages - 1) : totalPages || firstPage;\n        for (var i = state.firstPage; i <= lastPage; i++) {\n          links[i] = this.url;\n        }\n      }\n      else if (this.links) delete this.links;\n\n      if (!options.silent) this.trigger(\"pageable:state:change\", state);\n\n      return options.fetch ?\n        this.fetch(_omit(options, \"fetch\", \"resetState\")) :\n        this;\n    },\n\n    /**\n       @return {boolean} `true` if this collection can page backward, `false`\n       otherwise.\n    */\n    hasPreviousPage: function () {\n      var state = this.state;\n      var currentPage = state.currentPage;\n      if (this.mode != \"infinite\") return currentPage > state.firstPage;\n      return !!this.links[currentPage - 1];\n    },\n\n    /**\n       @return {boolean} `true` if this collection can page forward, `false`\n       otherwise.\n    */\n    hasNextPage: function () {\n      var state = this.state;\n      var currentPage = this.state.currentPage;\n      if (this.mode != \"infinite\") return currentPage < state.lastPage;\n      return !!this.links[currentPage + 1];\n    },\n\n    /**\n       Fetch the first page in server mode, or reset the current page of this\n       collection to the first page in client or infinite mode.\n\n       @param {Object} options {@linkPageableCollection#getPage} options.\n\n       @chainable\n       @return {XMLHttpRequest|PageableCollection} The XMLHttpRequest\n       from fetch or this.\n    */\n    getFirstPage: function (options) {\n      return this.getPage(\"first\", options);\n    },\n\n    /**\n       Fetch the previous page in server mode, or reset the current page of this\n       collection to the previous page in client or infinite mode.\n\n       @param {Object} options {@linkPageableCollection#getPage} options.\n\n       @chainable\n       @return {XMLHttpRequest|PageableCollection} The XMLHttpRequest\n       from fetch or this.\n    */\n    getPreviousPage: function (options) {\n      return this.getPage(\"prev\", options);\n    },\n\n    /**\n       Fetch the next page in server mode, or reset the current page of this\n       collection to the next page in client mode.\n\n       @param {Object} options {@linkPageableCollection#getPage} options.\n\n       @chainable\n       @return {XMLHttpRequest|PageableCollection} The XMLHttpRequest\n       from fetch or this.\n    */\n    getNextPage: function (options) {\n      return this.getPage(\"next\", options);\n    },\n\n    /**\n       Fetch the last page in server mode, or reset the current page of this\n       collection to the last page in client mode.\n\n       @param {Object} options {@linkPageableCollection#getPage} options.\n\n       @chainable\n       @return {XMLHttpRequest|PageableCollection} The XMLHttpRequest\n       from fetch or this.\n    */\n    getLastPage: function (options) {\n      return this.getPage(\"last\", options);\n    },\n\n    /**\n       Given a page index, set PageableCollection#state.currentPage to that\n       index. If this collection is in server mode, fetch the page using the\n       updated state, otherwise, reset the current page of this collection to\n       the page specified by `index` in client mode. If `options.fetch` is true,\n       a fetch can be forced in client mode before resetting the current\n       page. Under infinite mode, if the index is less than the current page, a\n       reset is done as in client mode. If the index is greater than the current\n       page number, a fetch is made with the results **appended**\n       toPageableCollection#fullCollection.  The current page will then be reset\n       after fetching.\n\n       @fires PageableCollection#pageable:state:change\n\n       @param {number|string} index - The page index to go to, or the page name to\n       look up fromPageableCollection#links in infinite mode.\n       @param {Object} options - {@linkPageableCollection#fetch} options or\n       [reset](http://backbonejs.org/#Collection-reset) options for client mode\n       when `options.fetch` is `false`.\n       @param {boolean} options.fetch = false - If true, force a\n       {@linkPageableCollection#fetch} in client mode.\n\n       @throws {TypeError} If `index` is not a finite integer under server or\n       client mode, or does not yield a URL fromPageableCollection#links under\n       infinite mode.\n\n       @throws {RangeError} If `index` is out of bounds.\n\n       @chainable\n       @return {XMLHttpRequest|PageableCollection} The XMLHttpRequest\n       from fetch or this.\n    */\n    getPage: function (index, options) {\n\n      var mode = this.mode, fullCollection = this.fullCollection;\n\n      options = options || {fetch: false};\n\n      var state = this.state,\n      firstPage = state.firstPage,\n      currentPage = state.currentPage,\n      lastPage = state.lastPage,\n      pageSize = state.pageSize;\n\n      var pageNum = index;\n      switch (index) {\n        case \"first\": pageNum = firstPage; break;\n        case \"prev\": pageNum = currentPage - 1; break;\n        case \"next\": pageNum = currentPage + 1; break;\n        case \"last\": pageNum = lastPage; break;\n        default: pageNum = finiteInt(index, \"index\");\n      }\n\n      this.state = this._checkState(_extend({}, state, {currentPage: pageNum}));\n      if (!options.silent) this.trigger(\"pageable:state:change\", this.state);\n\n      options.from = currentPage, options.to = pageNum;\n\n      var pageStart = (firstPage === 0 ? pageNum : pageNum - 1) * pageSize;\n      var pageModels = fullCollection && fullCollection.length ?\n        fullCollection.models.slice(pageStart, pageStart + pageSize) :\n        [];\n      if ((mode == \"client\" || (mode == \"infinite\" && !_isEmpty(pageModels))) &&\n          !options.fetch) {\n        this.reset(pageModels, _omit(options, \"fetch\"));\n        return this;\n      }\n\n      if (mode == \"infinite\") options.url = this.links[pageNum];\n\n      return this.fetch(_omit(options, \"fetch\"));\n    },\n\n    /**\n       Fetch the page for the provided item offset in server mode, or reset the\n       current page of this collection to the page for the provided item offset\n       in client mode.\n\n       @param {Object} options {@linkPageableCollection#getPage} options.\n\n       @chainable\n       @return {XMLHttpRequest|PageableCollection} The XMLHttpRequest\n       from fetch or this.\n    */\n    getPageByOffset: function (offset, options) {\n      if (offset < 0) {\n        throw new RangeError(\"`offset must be > 0`\");\n      }\n      offset = finiteInt(offset);\n\n      var page = floor(offset / this.state.pageSize);\n      if (this.state.firstPage !== 0) page++;\n      if (page > this.state.lastPage) page = this.state.lastPage;\n      return this.getPage(page, options);\n    },\n\n    /**\n       Overidden to make `getPage` compatible with Zepto.\n\n       @param {string} method\n       @param {Backbone.Model|Backbone.Collection} model\n       @param {Object} options\n\n       @return {XMLHttpRequest}\n    */\n    sync: function (method, model, options) {\n      var self = this;\n      if (self.mode == \"infinite\") {\n        var success = options.success;\n        var currentPage = self.state.currentPage;\n        options.success = function (resp, status, xhr) {\n          var links = self.links;\n          var newLinks = self.parseLinks(resp, _extend({xhr: xhr}, options));\n          if (newLinks.first) links[self.state.firstPage] = newLinks.first;\n          if (newLinks.prev) links[currentPage - 1] = newLinks.prev;\n          if (newLinks.next) links[currentPage + 1] = newLinks.next;\n          if (success) success(resp, status, xhr);\n        };\n      }\n\n      return (BBColProto.sync || Backbone.sync).call(self, method, model, options);\n    },\n\n    /**\n       Parse pagination links from the server response. Only valid under\n       infinite mode.\n\n       Given a response body and a XMLHttpRequest object, extract pagination\n       links from them for infinite paging.\n\n       This default implementation parses the RFC 5988 `Link` header and extract\n       3 links from it - `first`, `prev`, `next`. Any subclasses overriding this\n       method __must__ return an object hash having only the keys\n       above. However, simply returning a `next` link or an empty hash if there\n       are no more links should be enough for most implementations.\n\n       @param {*} resp The deserialized response body.\n       @param {Object} options\n       @param {XMLHttpRequest} options.xhr - The XMLHttpRequest object for this\n       response.\n       @return {Object}\n    */\n    parseLinks: function (resp, options) {\n      var links = {};\n      var linkHeader = options.xhr.getResponseHeader(\"Link\");\n      if (linkHeader) {\n        var relations = [\"first\", \"prev\", \"next\"];\n        _each(linkHeader.split(\",\"), function (linkValue) {\n          var linkParts = linkValue.split(\";\");\n          var url = linkParts[0].replace(URL_TRIM_RE, '');\n          var params = linkParts.slice(1);\n          _each(params, function (param) {\n            var paramParts = param.split(\"=\");\n            var key = paramParts[0].replace(PARAM_TRIM_RE, '');\n            var value = paramParts[1].replace(PARAM_TRIM_RE, '');\n            if (key == \"rel\" && _contains(relations, value)) links[value] = url;\n          });\n        });\n      }\n\n      return links;\n    },\n\n    /**\n       Parse server response data.\n\n       This default implementation assumes the response data is in one of two\n       structures:\n\n           [\n             {}, // Your new pagination state\n             [{}, ...] // An array of JSON objects\n           ]\n\n       Or,\n\n           [{}] // An array of JSON objects\n\n       The first structure is the preferred form because the pagination states\n       may have been updated on the server side, sending them down again allows\n       this collection to update its states. If the response has a pagination\n       state object, it is checked for errors.\n\n       The second structure is the\n       [Backbone.Collection#parse](http://backbonejs.org/#Collection-parse)\n       default.\n\n       **Note:** this method has been further simplified since 1.1.7. While\n       existingPageableCollection#parse implementations will continue to work,\n       new code is encouraged to overridePageableCollection#parseState\n       andPageableCollection#parseRecords instead.\n\n       @param {Object} resp The deserialized response data from the server.\n       @param {Object} the options for the ajax request\n\n       @return {Array.<Object>} An array of model objects\n    */\n    parse: function (resp, options) {\n      var newState = this.parseState(resp, _clone(this.queryParams), _clone(this.state), options);\n      if (newState) this.state = this._checkState(_extend({}, this.state, newState));\n      return this.parseRecords(resp, options);\n    },\n\n    /**\n       Parse server response for server pagination state updates. Not applicable\n       under infinite mode.\n\n       This default implementation first checks whether the response has any\n       state object as documented inPageableCollection#parse. If it exists, a\n       state object is returned by mapping the server state keys to this\n       pageable collection instance's query parameter keys using `queryParams`.\n\n       It is __NOT__ neccessary to return a full state object complete with all\n       the mappings defined inPageableCollection#queryParams. Any state object\n       resulted is merged with a copy of the current pageable collection state\n       and checked for sanity before actually updating. Most of the time, simply\n       providing a new `totalRecords` value is enough to trigger a full\n       pagination state recalculation.\n\n           parseState: function (resp, queryParams, state, options) {\n             return {totalRecords: resp.total_entries};\n           }\n\n       If you want to use header fields use:\n\n           parseState: function (resp, queryParams, state, options) {\n               return {totalRecords: options.xhr.getResponseHeader(\"X-total\")};\n           }\n\n       This method __MUST__ return a new state object instead of directly\n       modifying the PageableCollection#state object. The behavior of directly\n       modifying PageableCollection#state is undefined.\n\n       @param {Object} resp - The deserialized response data from the server.\n       @param {Object} queryParams - A copy of PageableCollection#queryParams.\n       @param {Object} state - A copy of PageableCollection#state.\n       @param {Object} options - The options passed through from\n       `parse`. (backbone >= 0.9.10 only)\n\n       @return {Object} A new (partial) state object.\n     */\n    parseState: function (resp, queryParams, state, options) {\n      if (resp && resp.length === 2 && _isObject(resp[0]) && _isArray(resp[1])) {\n\n        var newState = _clone(state);\n        var serverState = resp[0];\n\n        _each(_pairs(_omit(queryParams, \"directions\")), function (kvp) {\n          var k = kvp[0], v = kvp[1];\n          var serverVal = serverState[v];\n          if (!_isUndefined(serverVal) && !_.isNull(serverVal)) newState[k] = serverState[v];\n        });\n\n        if (serverState.order) {\n          newState.order = _invert(queryParams.directions)[serverState.order] * 1;\n        }\n\n        return newState;\n      }\n    },\n\n    /**\n       Parse server response for an array of model objects.\n\n       This default implementation first checks whether the response has any\n       state object as documented inPageableCollection#parse. If it exists, the\n       array of model objects is assumed to be the second element, otherwise the\n       entire response is returned directly.\n\n       @param {Object} resp - The deserialized response data from the server.\n       @param {Object} options - The options passed through from the\n       `parse`. (backbone >= 0.9.10 only)\n\n       @return {Array.<Object>} An array of model objects\n     */\n    parseRecords: function (resp, options) {\n      if (resp && resp.length === 2 && _isObject(resp[0]) && _isArray(resp[1])) {\n        return resp[1];\n      }\n\n      return resp;\n    },\n\n    /**\n       Fetch a page from the server in server mode, or all the pages in client\n       mode. Under infinite mode, the current page is refetched by default and\n       then reset.\n\n       The query string is constructed by translating the current pagination\n       state to your server API query parameter\n       usingPageableCollection#queryParams. The current page will reset after\n       fetch.\n\n       @param {Object} options - Accepts all\n       [Backbone.Collection#fetch](http://backbonejs.org/#Collection-fetch)\n       options.\n\n       @return {XMLHttpRequest}\n    */\n    fetch: function (options) {\n\n      options = options || {};\n\n      var state = this._checkState(this.state);\n\n      var mode = this.mode;\n\n      if (mode == \"infinite\" && !options.url) {\n        options.url = this.links[state.currentPage];\n      }\n\n      var data = options.data || {};\n\n      // dedup query params\n      var url = options.url || this.url || \"\";\n      if (_isFunction(url)) url = url.call(this);\n      var qsi = url.indexOf('?');\n      if (qsi != -1) {\n        _extend(data, queryStringToParams(url.slice(qsi + 1)));\n        url = url.slice(0, qsi);\n      }\n\n      options.url = url;\n      options.data = data;\n\n      // map params except directions\n      var queryParams = this.mode == \"client\" ?\n        _pick(this.queryParams, \"sortKey\", \"order\") :\n        _omit(_pick(this.queryParams, _keys(PageableProto.queryParams)),\n              \"directions\");\n\n      var thisCopy = _.clone(this);\n      _.each(queryParams, function (v, k) {\n        v = _isFunction(v) ? v.call(thisCopy) : v;\n        if (state[k] != null && v != null && _.isUndefined(data[v])) {\n          data[v] = state[k];\n        }\n      }, this);\n\n      // fix up sorting parameters\n      var i;\n      if (state.sortKey && state.order) {\n        var o = _isFunction(queryParams.order) ?\n          queryParams.order.call(thisCopy) :\n          queryParams.order;\n          if (!_isArray(state.order)) {\n              data[o] = this.queryParams.directions[state.order + \"\"];\n          }\n          else {\n              data[o] = [];\n              for (i = 0; i < state.order.length; i += 1) {\n                  data[o].push(this.queryParams.directions[state.order[i]]);\n              }\n          }\n      }\n      else if (!state.sortKey) delete data[queryParams.order];\n\n      // map extra query parameters\n      var extraKvps = _pairs(_omit(this.queryParams,\n                                   _keys(PageableProto.queryParams))),\n          kvp,\n          v;\n      for (i = 0; i < extraKvps.length; i++) {\n        kvp = extraKvps[i];\n        v = kvp[1];\n        v = _isFunction(v) ? v.call(thisCopy) : v;\n        if (v != null) data[kvp[0]] = v;\n      }\n\n      if (mode != \"server\") {\n        var self = this, fullCol = this.fullCollection;\n        var success = options.success;\n        options.success = function (col, resp, opts) {\n\n          // make sure the caller's intent is obeyed\n          opts = opts || {};\n          if (_isUndefined(options.silent)) delete opts.silent;\n          else opts.silent = options.silent;\n\n          var models = col.models;\n          if (mode == \"client\") fullCol.reset(models, opts);\n          else {\n            fullCol.add(models, _extend({at: fullCol.length},\n                                        _extend(opts, {parse: false})));\n            self.trigger(\"reset\", self, opts);\n          }\n\n          if (success) success(col, resp, opts);\n        };\n\n        // silent the first reset from backbone\n        return BBColProto.fetch.call(this, _extend({}, options, {silent: true}));\n      }\n\n      return BBColProto.fetch.call(this, options);\n    },\n\n    /**\n       Convenient method for making a `comparator` sorted by a model attribute\n       identified by `sortKey` and ordered by `order`.\n\n       Like a Backbone.Collection, a PageableCollection will maintain the\n       __current page__ in sorted order on the client side if a `comparator` is\n       attached to it. If the collection is in client mode, you can attach a\n       comparator toPageableCollection#fullCollection to have all the pages\n       reflect the global sorting order by specifying an option `full` to\n       `true`. You __must__ call `sort` manually\n       orPageableCollection#fullCollection.sort after calling this method to\n       force a resort.\n\n       While you can use this method to sort the current page in server mode,\n       the sorting order may not reflect the global sorting order due to the\n       additions or removals of the records on the server since the last\n       fetch. If you want the most updated page in a global sorting order, it is\n       recommended that you set PageableCollection#state.sortKey and optionally\n       PageableCollection#state.order, and then callPageableCollection#fetch.\n\n       @protected\n\n       @param {string} sortKey = this.state.sortKey - See `state.sortKey`.\n       @param {number} order = this.state.order - See `state.order`.\n       @param {(function(Backbone.Model, string): Object) | string} sortValue -\n       See PageableCollection#setSorting.\n\n       See [Backbone.Collection.comparator](http://backbonejs.org/#Collection-comparator).\n    */\n    _makeComparator: function (sortKey, order, sortValue) {\n      var state = this.state;\n\n      sortKey = sortKey || state.sortKey;\n      order = order || state.order;\n\n      if (!sortKey || !order) return;\n\n      if (!sortValue) sortValue = function (model, attr) {\n        return model.get(attr);\n      };\n\n      return function (left, right) {\n        var l = sortValue(left, sortKey), r = sortValue(right, sortKey), t;\n        if (order === 1) t = l, l = r, r = t;\n        if (l === r) return 0;\n        else if (l < r) return -1;\n        return 1;\n      };\n    },\n\n    /**\n       Adjusts the sorting for this pageable collection.\n\n       Given a `sortKey` and an `order`, sets `state.sortKey` and\n       `state.order`. A comparator can be applied on the client side to sort in\n       the order defined if `options.side` is `\"client\"`. By default the\n       comparator is applied to thePageableCollection#fullCollection. Set\n       `options.full` to `false` to apply a comparator to the current page under\n       any mode. Setting `sortKey` to `null` removes the comparator from both\n       the current page and the full collection.\n\n       If a `sortValue` function is given, it will be passed the `(model,\n       sortKey)` arguments and is used to extract a value from the model during\n       comparison sorts. If `sortValue` is not given, `model.get(sortKey)` is\n       used for sorting.\n\n       @chainable\n\n       @param {string} sortKey - See `state.sortKey`.\n       @param {number} order=this.state.order - See `state.order`.\n       @param {Object} options\n       @param {string} options.side - By default, `\"client\"` if `mode` is\n       `\"client\"`, `\"server\"` otherwise.\n       @param {boolean} options.full = true\n       @param {(function(Backbone.Model, string): Object) | string} options.sortValue\n    */\n    setSorting: function (sortKey, order, options) {\n\n      var state = this.state;\n\n      state.sortKey = sortKey;\n      state.order = order = order || state.order;\n\n      var fullCollection = this.fullCollection;\n\n      var delComp = false, delFullComp = false;\n\n      if (!sortKey) delComp = delFullComp = true;\n\n      var mode = this.mode;\n      options = _extend({side: mode == \"client\" ? mode : \"server\", full: true},\n                        options);\n\n      var comparator = this._makeComparator(sortKey, order, options.sortValue);\n\n      var full = options.full, side = options.side;\n\n      if (side == \"client\") {\n        if (full) {\n          if (fullCollection) fullCollection.comparator = comparator;\n          delComp = true;\n        }\n        else {\n          this.comparator = comparator;\n          delFullComp = true;\n        }\n      }\n      else if (side == \"server\" && !full) {\n        this.comparator = comparator;\n      }\n\n      if (delComp) this.comparator = null;\n      if (delFullComp && fullCollection) fullCollection.comparator = null;\n\n      return this;\n    }\n\n  });\n\n  var PageableProto = PageableCollection.prototype;\n\n  return PageableCollection;\n\n}));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/backbone.paginator/lib/backbone.paginator.js\n// module id = 152\n// module chunks = 2","Backbone = require 'backbone'\nMarionette = require 'backbone.marionette'\nPageableCollection = require 'backbone.paginator'\n\n{ BaseLocalStorageCollection } = require 'tbirds/lscollection'\n\nModels = require './models'\n\n\nMainChannel = Backbone.Radio.channel 'global'\nBumblrChannel = Backbone.Radio.channel 'bumblr'\n\nbaseURL = '//api.tumblr.com/v2'\n  \nclass PhotoPostCollection extends Backbone.Collection\n  url: () ->\n    \"#{baseURL}/#{@id}/posts/photo?callback=?\"\n    \nclass BlogPosts extends PageableCollection\n  mode: 'server'\n  full: true\n  baseURL: baseURL\n  url: () ->\n    \"#{@baseURL}/blog/#{@base_hostname}/posts/photo?api_key=#{@api_key}\"\n\n  fetch: (options) ->\n    options || options = {}\n    data = (options.data || {})\n    current_page = @state.currentPage\n    offset = current_page * @state.pageSize\n    options.offset = offset\n    options.dataType = 'jsonp'\n    super options\n    \n  parse: (response) ->\n    total_posts = response.response.total_posts\n    @state.totalRecords = total_posts\n    super response.response.posts\n   state:\n    firstPage: 0\n    pageSize: 15\n    \n  queryParams:\n    pageSize: 'limit'\n    offset: () ->\n      @state.currentPage * @state.pageSize\n      \nmake_blog_post_collection = (base_hostname) ->\n  settings = BumblrChannel.request 'get_app_settings'\n  api_key = settings.get 'consumer_key'\n  bp = new BlogPosts\n  bp.api_key = api_key\n  bp.base_hostname = base_hostname\n  return bp\n  \nreq = 'make_blog_post_collection'\nBumblrChannel.reply req, (base_hostname) ->\n  make_blog_post_collection base_hostname\n  \n\nclass LocalBlogCollection extends BaseLocalStorageCollection\n  model: Models.BlogInfo\n   # FIXME: This is ugly!\n  add_blog: (name) ->\n    sitename = \"#{name}.tumblr.com\"\n    model = new Models.BlogInfo\n    model.set 'id', sitename\n    model.set 'name', name\n    model.api_key = @api_key\n    @add model\n    @save()\n    model.fetch()\n    return model\n        \nlocal_blogs = new LocalBlogCollection\nsettings = BumblrChannel.request 'get_app_settings'\napi_key = settings.get 'consumer_key'\nlocal_blogs.api_key = api_key\nBumblrChannel.reply 'get_local_blogs', ->\n  local_blogs\n   \nmodule.exports =\n  PhotoPostCollection: PhotoPostCollection\n\n\n\n// WEBPACK FOOTER //\n// ./client/applets/bumblr/collections.coffee","$ = require 'jquery'\nBackbone = require 'backbone'\nMarionette = require 'backbone.marionette'\n\nUtil = require 'tbirds/apputil'\n{ MainController } = require 'tbirds/controllers'\n{ make_sidebar_template } = require 'tbirds/templates/layout'\n\nModels = require './models'\nCollections = require './collections'\n\nMiscViews = require './views/misc'\nSideBarView = require './views/sidebar'\n\n\nBumblrChannel = Backbone.Radio.channel 'bumblr'\n\nsidebar_template = make_sidebar_template()\n  \n\n\nside_bar_data = new Backbone.Model\n  entries: [\n    {\n      name: 'List Blogs'\n      url: '#bumblr/listblogs'\n    }\n    {\n      name: 'Settings'\n      url: '#bumblr/settings'\n    }\n    ]\n\nclass BumblerLayout extends Backbone.Marionette.View\n  template: sidebar_template\n  regions:\n    sidebar: '#sidebar'\n    content: '#main-content'\n    \n  \nclass Controller extends MainController\n  layoutClass: BumblerLayout\n  sidebarclass: SideBarView\n  sidebar_model: side_bar_data\n  _make_sidebar: ->\n    sidebar = @_empty_sidebar()\n    view = new @sidebarclass\n      model: @sidebar_model\n    sidebar.show view\n    \n  \n  set_header: (title) ->\n    header = $ '#header'\n    header.text title\n    \n  start: ->\n    #console.log 'bumblr start called'\n    @setup_layout_if_needed()\n    @set_header 'Bumblr'\n    @list_blogs()\n\n  default_view: ->\n    @start()\n    \n  show_mainview: () ->\n    @_make_sidebar()\n    view = new MiscViews.MainBumblrView\n    @layout.showChildView 'content', view\n    Util.scroll_top_fast()\n    \n  show_dashboard: () ->\n    @_make_sidebar()\n    view = new MiscViews.BumblrDashboardView\n    @layout.showChildView 'content', view\n    Util.scroll_top_fast()\n      \n  list_blogs: () ->\n    @setup_layout_if_needed()\n    @_make_sidebar()\n    require.ensure [], () =>\n      blogs = BumblrChannel.request 'get_local_blogs'\n      SimpleBlogListView = require './views/bloglist'\n      view = new SimpleBlogListView\n        collection: blogs\n      @layout.showChildView 'content', view\n    # name the chunk\n    , 'bumblr-view-list-blogs'\n    \n  view_blog: (blog_id) ->\n    #console.log 'view blog called for ' + blog_id\n    @setup_layout_if_needed()\n    @_make_sidebar()\n    require.ensure [], () =>\n      host = blog_id + '.tumblr.com'\n      collection = BumblrChannel.request 'make_blog_post_collection', host\n      BlogPostListView = require './views/postlist'\n      response = collection.fetch()\n      response.done =>\n        view = new BlogPostListView\n          collection: collection\n        @layout.showChildView 'content', view\n        Util.scroll_top_fast()\n    # name the chunk\n    , 'bumblr-view-blog-view'\n    \n  add_new_blog: () ->\n    @setup_layout_if_needed()\n    @_make_sidebar()\n    require.ensure [], () =>\n      NewBlogFormView = require './views/newblog'\n      view = new NewBlogFormView\n      @layout.showChildView 'content', view\n      Util.scroll_top_fast()\n    # name the chunk\n    , 'bumblr-view-add-blog'\n    \n          \n  settings_page: () ->\n    @setup_layout_if_needed()\n    @_make_sidebar()\n    require.ensure [], () =>\n      ConsumerKeyFormView = require './views/settingsform'\n      settings = BumblrChannel.request 'get_app_settings'\n      view = new ConsumerKeyFormView model:settings\n      @layout.showChildView 'content', view\n      Util.scroll_top_fast()\n    # name the chunk\n    , 'bumblr-view-settings'\n    \nmodule.exports = Controller\n\n\n\n\n// WEBPACK FOOTER //\n// ./client/applets/bumblr/controller.coffee","Backbone = require 'backbone'\nMarionette = require 'backbone.marionette'\ntc = require 'teacup'\n\n\nBumblrChannel = Backbone.Radio.channel 'bumblr'\n\n########################################\nmain_bumblr_view = tc.renderable (model) ->\n  tc.p 'main bumblr view'\n\nbumblr_dashboard_view = tc.renderable (model) ->\n  tc.p 'bumblr_dashboard_view'\n\n\n########################################\nclass MainBumblrView extends Backbone.Marionette.View\n  template: main_bumblr_view\n\nclass BumblrDashboardView extends Backbone.Marionette.View\n  template: bumblr_dashboard_view\n\nmodule.exports =\n  MainBumblrView: MainBumblrView\n  BumblrDashboardView: BumblrDashboardView\n\n\n\n// WEBPACK FOOTER //\n// ./client/applets/bumblr/views/misc.coffee","Backbone = require 'backbone'\nMarionette = require 'backbone.marionette'\ntc = require 'teacup'\n\n{ navigate_to_url } = require 'tbirds/apputil'\n\nBumblrChannel = Backbone.Radio.channel 'bumblr'\n\n########################################\nsidebar_template = tc.renderable (model) ->\n  tc.div '.sidebar-menu.btn-group-vertical', ->\n    for entry in model.entries\n      tc.button '.sidebar-entry-button.btn.btn-default',\n      'button-url':entry.url, ->\n        tc.text entry.name          \n\nclass BaseSideBarView extends Backbone.Marionette.View\n  template: sidebar_template\n  events:\n    'click .sidebar-entry-button': 'sidebar_button_pressed'\n\n  sidebar_button_pressed: (event) ->\n    #console.log \"Sidebar_button_pressed\"\n    url = event.currentTarget.getAttribute 'button-url'\n    navigate_to_url url\n      \n\nmodule.exports = BaseSideBarView\n\n\n\n// WEBPACK FOOTER //\n// ./client/applets/bumblr/views/sidebar.coffee"],"sourceRoot":""}